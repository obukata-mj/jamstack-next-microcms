<VirtualHost *:80>
    ServerName jamstack-next-microcms.mj-star.jp

    # 静的サイト配信
    DocumentRoot /home/deployer/sites/jamstack-next-microcms.mj-star.jp/dist
    <Directory "/home/deployer/sites/jamstack-next-microcms.mj-star.jp/dist">
        Options FollowSymLinks
        AllowOverride all
        Require all granted
    </Directory>

    # API関連をAliasで公開
    Alias /api/ /home/deployer/sites/jamstack-next-microcms.mj-star.jp/api/
    <Directory "/home/deployer/sites/jamstack-next-microcms.mj-star.jp/api">
        Options +ExecCGI
        AllowOverride None
        Require all granted
    </Directory>

    # ログ設定
    ErrorLog /home/deployer/sites/jamstack-next-microcms.mj-star.jp/log/httpd.error.log
    TransferLog /home/deployer/sites/jamstack-next-microcms.mj-star.jp/log/httpd.access.log
</VirtualHost>